<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Buscador Log√≠stico HN - H√≠brido</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #121212; color: white; padding: 20px; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 500px; }
        input { 
            width: 100%; padding: 16px; border-radius: 12px; border: 2px solid #333; 
            background: #1e1e1e; color: white; font-size: 18px; outline: none; box-sizing: border-box;
        }
        input:focus { border-color: #4db8ff; }
        .results { background: #1e1e1e; border-radius: 12px; margin-top: 10px; border: 1px solid #333; }
        .item { padding: 15px; border-bottom: 1px solid #333; cursor: pointer; }
        .item:hover { background: #252525; }
        .item strong { color: #4db8ff; display: block; }
        .google-rescue { 
            display: block; padding: 15px; background: #4285F4; color: white; 
            text-align: center; text-decoration: none; border-radius: 12px; margin-top: 10px; font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>üîé Buscador Honduras Pro</h2>
    <input type="text" id="search" placeholder="Ej: Barrio Las Acacias, SPS" onkeyup="buscar()">
    
    <div id="results" class="results"></div>
    
    <a id="googleBtn" href="#" target="_blank" class="google-rescue" style="display:none;">
        üöÄ Abrir en Google Maps (B√∫squeda Global)
    </a>
</div>

<script>
    let timer;
    function buscar() {
        const query = document.getElementById('search').value;
        const resDiv = document.getElementById('results');
        const gBtn = document.getElementById('googleBtn');
        
        clearTimeout(timer);
        if (query.length < 3) { 
            resDiv.innerHTML = ''; 
            gBtn.style.display = 'none';
            return; 
        }

        // Mostrar siempre el bot√≥n de Google Maps como respaldo
        gBtn.style.display = 'block';
        gBtn.href = `https://www.google.com/maps/search/${encodeURIComponent(query + " Honduras")}`;

        timer = setTimeout(() => {
            fetch(`https://photon.komoot.io/api/?q=${encodeURIComponent(query)}&lat=15.5&lon=-88.0&limit=10`)
            .then(res => res.json())
            .then(data => {
                resDiv.innerHTML = '';
                const hnFeatures = data.features.filter(f => f.properties.countrycode === "HN" || f.properties.country === "Honduras");
                
                if (hnFeatures.length === 0) {
                    resDiv.innerHTML = '<div class="item">‚ö†Ô∏è No hallado en base de datos local. Usa el bot√≥n azul de Google Maps arriba.</div>';
                    return;
                }

                hnFeatures.forEach(f => {
                    const p = f.properties;
                    resDiv.innerHTML += `
                        <div class="item" onclick="window.open('https://www.google.com/maps/search/${encodeURIComponent(p.name + ' ' + (p.city || '') + ' Honduras')}')">
                            <strong>${p.name}</strong>
                            <small>${p.city || ''}, ${p.state || ''} - ${p.district || 'Zona'}</small>
                        </div>`;
                });
            });
        }, 300);
    }
</script>
</body>
</html>
